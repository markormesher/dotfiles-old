version: 2

defaults: &defaults
  working_directory: ~/dotfiles

jobs:
  setup-ubuntu-18.04:
    <<: *defaults
    docker:
      - image: circleci/buildpack-deps:bionic
    steps:
      - checkout
      - run:
          name: Debug
          command: pwd; ls -l; whoami; sudo -l
      - run:
          name: Run sync
          command: sudo ./bin/dot-sync personal
      - run:
          name: Run setup
          command: sudo ./bin/dot-setup

workflows:
  version: 2
  test:
    jobs:
      - setup-ubuntu-18.04
